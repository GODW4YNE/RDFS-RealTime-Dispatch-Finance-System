{% extends 'base.html' %}
{% block content %}
<h2 class="fw-bold mb-4"><i class="bi bi-person-gear"></i> User Management</h2>

<!-- ✅ Create New User -->
<a href="{% url 'accounts:create_user' %}" class="btn btn-success mb-3">
    <i class="bi bi-person-plus"></i> Create New Account
</a>

<!-- ✅ User Table -->
<table class="table table-striped table-bordered align-middle">
    <thead class="table-primary">
        <tr>
            <th>Username</th>
            <th>Email</th>
            <th>Role</th>
            <th class="text-center">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for user in users %}
        <tr>
            <td>{{ user.username }}</td>
            <td>{{ user.email }}</td>
            <td>
                {% if user.role == 'admin' %}
                    <span class="badge bg-danger"><i class="bi bi-shield-lock"></i> Admin</span>
                {% elif user.role == 'staff_admin' %}
                    <span class="badge bg-primary"><i class="bi bi-person-gear"></i> Staff Admin</span>
                {% elif user.role == 'driver' %}
                    <span class="badge bg-secondary"><i class="bi bi-person"></i> Driver</span>
                {% else %}
                    <span class="badge bg-dark">Unknown</span>
                {% endif %}
            </td>
            <td class="text-center">
                <a href="{% url 'accounts:edit_user' user.id %}" class="btn btn-warning btn-sm">
                    <i class="bi bi-pencil-square"></i> Edit
                </a>
                <a href="{% url 'accounts:delete_user' user.id %}" class="btn btn-danger btn-sm">
                    <i class="bi bi-trash"></i> Delete
                </a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4" class="text-center text-muted">No users found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- ✅ Flash Messages -->
{% if messages %}
    <div class="mt-3">
        {% for message in messages %}
            <div class="alert alert-success py-2 mb-2">{{ message }}</div>
        {% endfor %}
    </div>
{% endif %}
{% endblock %}
